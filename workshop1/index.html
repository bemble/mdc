<html>
    <head>
        <title>Bouncy curvy ball</title>
        <style>
            canvas { background-color: white; border: 1px solid #AAA; margin: 0 auto;};
        </style>
    </head>
    <body>
        <canvas width="300" height="600">
        <canvas>
        <script>
            (function() {
                var canvas = document.querySelector('canvas');
				var balls = [];
				
                var frameRate = 1/40; // Seconds
                var frameDelay = frameRate * 1000; // ms
				initialisation(canvas);
                
                function Ball() {
                    this.velocity = {x: 0, y: 0};
                    this.position = {x: 150, y: 75};
                    this.mass = 0.1;
                    this.radius = 10;
					
					this.init = init;

					
					function init(x, y, vx, vy){
						this.x = x;
						this.y = x;
						this.vx = vx;
						this.vy = vy;
					}
                }
				
				function Canvas(){
					this.width;
					this.height;
					this.ctx;
					this.init = init;
					this.clear = clear;
					
					function init(tag){
						this.tag = tag;
						this.width = canvas.width;
						this.height = canvas.heigth;
						this.ctx = canvas.getContext("2d");
					}
					
					function clear(){
						ctx.clearRect(0, 0, canvas.width, canvas.height);
					}
				}
                
                Ball.prototype.draw = function() {
                    ctx.beginPath();
                    ctx.arc(this.position.x, this.position.y, this.radius, 0, Math.PI*2, true); 
                    ctx.closePath();
                    ctx.fill();
                };
                
                Ball.prototype.computeVelocity = function() {
                    var Cd = 0.47;  // Dimensionless
                    var rho = 1.22; // kg / m^3
                    var A = Math.PI * this.radius * this.radius / (10000); // m^2
                    var ag = 9.81;  // m / s^2
                
                    var Fx = -0.5 * Cd * A * rho * this.velocity.x * this.velocity.x * this.velocity.x / Math.abs(this.velocity.x);
                    var Fy = -0.5 * Cd * A * rho * this.velocity.y * this.velocity.y * this.velocity.y / Math.abs(this.velocity.y);
                    
                    Fx = (isNaN(Fx) ? 0 : Fx);
                    Fy = (isNaN(Fy) ? 0 : Fy);
                    
                        // Calculate acceleration ( F = ma )
                    var ax = Fx / this.mass;
                    var ay = ag + (Fy / this.mass);
                    
                    this.velocity.x += ax*frameRate;
                    this.velocity.y += ay*frameRate;
                    
                        // Integrate to get position
                    var newX = this.position.x + this.velocity.x*frameRate*100;
                    var newY = this.position.y + this.velocity.y*frameRate*100;
                    if(newY + this.radius > canvas.height) {
                        newY = canvas.height - this.radius;
                    }
                    this.position.x = newX;
                    this.position.y = newY;
                };
                
                var ball = new Ball();
                ball.draw();
                
                var interval = setInterval(function() {
                    ball.computeVelocity();
                        canvas.clear();
                        ball.draw();
                }, frameDelay);
				
				
				function initialisation(nbBalls, tag){
					var canvas = new Canvas(tag);
					
					for (x = 0; x<nbBalls; x++){
						Math.Random()
					}
				}
            })();
        </script>
    </body>
</html>